<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Environment Variables Test</title>
</head>
<body>
    <h1>Environment Variables Test</h1>
    <div id="results"></div>
    
    <script type="module">
        // Test environment variable loading
        const results = document.getElementById('results');
        
        const envVars = {
            'VITE_SUPABASE_URL': import.meta.env.VITE_SUPABASE_URL,
            'VITE_SUPABASE_ANON_KEY': import.meta.env.VITE_SUPABASE_ANON_KEY
        };
        
        let html = '<h2>Environment Variables:</h2><ul>';
        
        for (const [key, value] of Object.entries(envVars)) {
            const status = value ? '✅ Present' : '❌ Missing';
            const displayValue = value ? (key.includes('KEY') ? value.substring(0, 20) + '...' : value) : 'undefined';
            html += `<li><strong>${key}:</strong> ${status} - ${displayValue}</li>`;
        }
        
        html += '</ul>';
        
        // Test Supabase connection
        html += '<h2>Supabase Connection Test:</h2>';
        
        try {
            const { createClient } = await import('@supabase/supabase-js');
            const supabaseUrl = import.meta.env.VITE_SUPABASE_URL || "https://wzfpltamwhkncxjvulik.supabase.co";
            const supabaseKey = import.meta.env.VITE_SUPABASE_ANON_KEY || "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind6ZnBsdGFtd2hrbnN4anZ1bGlrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ0NDI5NTksImV4cCI6MjA3MDAxODk1OX0.4m707IwEkfrE-HIJFoP8hUz6VckZTTc_3CgH44f68Hk";
            
            const supabase = createClient(supabaseUrl, supabaseKey);
            
            html += `<p><strong>URL:</strong> ${supabaseUrl}</p>`;
            html += `<p><strong>Key (first 20 chars):</strong> ${supabaseKey.substring(0, 20)}...</p>`;
            
            // Test authentication
            const { data, error } = await supabase.auth.getSession();
            if (error) {
                html += `<p>❌ <strong>Auth Error:</strong> ${error.message}</p>`;
            } else {
                html += `<p>✅ <strong>Supabase connection successful!</strong></p>`;
            }
            
        } catch (error) {
            html += `<p>❌ <strong>Connection Error:</strong> ${error.message}</p>`;
        }
        
        results.innerHTML = html;
    </script>
</body>
</html>
